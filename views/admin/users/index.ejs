<%- include("../../layouts/header-admin", { title: "Data User" }) %>

    <div class="container py-4">

        <div class="d-flex justify-content-between mb-3">
            <h3>Data User</h3>
            <a href="/admin/users/export" class="btn btn-success">Export CSV</a>
        </div>

        <table class="table table-striped table-bordered datatable">
            <thead class="table-dark">
                <tr>
                    <th>Nama</th>
                    <th>Email</th>
                    <th>Visited</th>
                    <th>Lunch</th>
                    <th>Souvenir</th>
                    <th>Aksi</th>
                </tr>
            </thead>

            <tbody>
                <% Object.entries(users).forEach(([id, u])=> { %>
                    <tr>
                        <td>
                            <%= u.name %>
                        </td>
                        <td>
                            <%= u.email %>
                        </td>
                        <td>
                            <%= u.visited_count || 0 %>
                        </td>
                        <td>
                            <%= u.lunch_claimed ? "✔" : "✖" %>
                        </td>
                        <td>
                            <%= u.souvenir_claimed ? "✔" : "✖" %>
                        </td>
                        <td>
                            <a href="/admin/users/<%= id %>" class="btn btn-sm btn-info">Detail</a>
                            <a href="/admin/users/<%= id %>/delete" onclick="return confirm('Hapus user?')"
                                class="btn btn-sm btn-danger">Delete</a>
                        </td>
                    </tr>
                    <% }) %>
            </tbody>
        </table>

    </div>

    <%- include("../../layouts/footer") %>